name: Luzhniki Monitor

on:
  schedule:
    - cron: "*/10 * * * *"  # запуск каждые 10 минут
  workflow_dispatch: {}      # можно запустить вручную

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: |
          npm install playwright node-fetch@2 proxy-chain \
            socks-proxy-agent@6.2.1 http-proxy-agent@5 https-proxy-agent@5

      - name: Install Playwright browsers (Chromium)
        run: npx playwright install --with-deps chromium

      - name: Run monitor
        run: node monitor-luzhniki.js
        env:
          TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
          PROXY_LIST: ${{ secrets.PROXY_LIST }}   # сюда можно добавить список или оставить пустым
          DEBUG: '1'                              # подробные логи в консоли Actions
          SEND_ALL: '1'                           # шлём все найденные сло_
